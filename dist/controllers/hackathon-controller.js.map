{"version":3,"sources":["../../controllers/hackathon-controller.js"],"names":["createHackathon","req","res","next","hackathonId","parseInt","body","id","hackathonUuid","uuid","hackathonBody","data","userId","createOrUpsertUser","makeUserHackathonOrganiser","addUserToHackathonOrganisers","json","status","message","e","console","error","getHackathonDataAsOrganiser"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,SAASA,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACrC,QAAI;AACA,YAAMC,cAAcC,SAASJ,IAAIK,IAAJ,CAASC,EAAlB,CAApB;AACA,YAAMC,gBAAgBP,IAAIK,IAAJ,CAASG,IAA/B;AACA,YAAMC,gBAAgBT,IAAIK,IAAJ,CAASK,IAA/B;AACA,YAAMC,SAASX,IAAIK,IAAJ,CAASM,MAAxB;;AAEA;AACA,mCAAiBZ,eAAjB,CAAiCI,WAAjC,EAA8CI,aAA9C,EAA6DE,aAA7D;AACA,8BAAYG,kBAAZ,CAA+BD,MAA/B;AACA,8BAAYE,0BAAZ,CAAuCF,MAAvC,EAA+CR,WAA/C;AACA,mCAAiBW,4BAAjB,CAA8CH,MAA9C,EAAsDR,WAAtD;;AAEAF,YAAIc,IAAJ,CAAS;AACLC,oBAAQ,SADH;AAELC,yDAA2Cd,WAA3C,wBAAyEQ;AAFpE,SAAT;AAIH,KAhBD,CAgBE,OAAOO,CAAP,EAAU;AACRC,gBAAQC,KAAR,CAAcF,CAAd;AACAjB,YAAIc,IAAJ,CAAS,EAACC,QAAQ,OAAT,EAAkBC,SAAS,4BAA3B,EAAT;AACH;AACJ;;AAED,SAASI,2BAAT,CAAqCrB,GAArC,EAA0CC,GAA1C,EAA+C,CAE9C;;kBAEc,EAACF,gCAAD,EAAkBsB,wDAAlB,E","file":"hackathon-controller.js","sourcesContent":["import HackathonService from '../services/hackathon-service';\nimport UserService from '../services/user-service'\n\nfunction createHackathon(req, res, next) {\n    try {\n        const hackathonId = parseInt(req.body.id);\n        const hackathonUuid = req.body.uuid;\n        const hackathonBody = req.body.data;\n        const userId = req.body.userId;\n\n        //Not consistent if one of these operations fails. Stupid MongoDB and Mongoose\n        HackathonService.createHackathon(hackathonId, hackathonUuid, hackathonBody);\n        UserService.createOrUpsertUser(userId);\n        UserService.makeUserHackathonOrganiser(userId, hackathonId);\n        HackathonService.addUserToHackathonOrganisers(userId, hackathonId);\n\n        res.json({\n            status: 'SUCCESS',\n            message: `Successfully created Hackathon ${hackathonId} linked to user ${userId}`\n        })\n    } catch (e) {\n        console.error(e);\n        res.json({status: 'ERROR', message: 'Unable to create hackathon'});\n    }\n}\n\nfunction getHackathonDataAsOrganiser(req, res) {\n\n}\n\nexport default {createHackathon, getHackathonDataAsOrganiser}"]}